<validation-observer ref="observer" v-slot="{invalid}">
    <v-dialog :retain-focus="false" no-click-animation persistent v-model="dialog" fullscreen>


        <form @submit.prevent="save">
        <v-card v-if="dialog" class="overflow-hidden">

            <v-app-bar
                    absolute
                    color="pv"
                    dark

                    class="card-header"

            >
                <v-toolbar-title>${formTitle}
                    <v-chip v-if="editedItem.id" pill label color="primary" class="white--text ml-1">
                        ID ${editedItem.id}
                    </v-chip>

                    

                    <span class="gv--text" v-if="editedItem.name"> ${editedItem.name}</span>
                    <span class="gv--text" v-if="editedItem.name_ar"> ${editedItem.name_ar}</span>
                </v-toolbar-title>
                <v-spacer></v-spacer>


                <v-btn  type="submit" dark color="primary darken-1" small class="mx-2" depressed>
                    {{ _('Save Actor') }}
                </v-btn>
                <v-btn @click="confirmClose" icon>
                    <v-icon>mdi-close</v-icon>
                </v-btn>


            </v-app-bar
            >

            <v-sheet
                    id="card-content"
                    max-height="100vh"
                    class="overflow-y-auto pt-11">

                <v-card-text>
                    <v-container>

                        <v-row>
                            <v-col md="2">
                                <validation-provider name="Actor Type" rules="required" v-slot="{ errors }">
                                    <v-btn-toggle class="mt-5" v-model="editedItem.type" mandatory>
                                        <v-btn small
                                                v-for="item in ['Entity', 'Person']"
                                                :key="item"
                                                :value="item"
                                        >
                                            ${ item }
                                        </v-btn>
                                    </v-btn-toggle>

                                    <span class="orange--text"> ${errors[0]}</span>
                                </validation-provider>
                            </v-col>
                        </v-row>

                        <template v-if="editedItem.type === 'Entity'">
                            <v-row>
                                <v-col cols="12" md="6">
                                    <v-card class="d-flex" flat>
                                        <div style="flex:auto" v-if="name__">
                                            <validation-provider name="Name" :rules="{oneisnull:editedItem.name_ar}"
                                                                 v-slot="{errors}">
                                                <v-text-field
                                                        v-model="editedItem.name"
                                                        label="{{ _('Name') }}"
                                                ></v-text-field>
                                                <span class="orange--text">${errors[0]}</span>
                                            </validation-provider>
                                        </div>

                                        <div v-else style="flex:auto">
                                            <validation-provider name="Name(ar)" :rules="{oneisnull:editedItem.name}"
                                                                 v-slot="{errors}">
                                                <v-text-field
                                                        v-model="editedItem.name_ar"
                                                        label="{{ _('Name (AR)') }}"
                                                        background-color="lime lighten-5"
                                                ></v-text-field>
                                                <span class="orange--text">${errors[0]}</span>
                                            </validation-provider>
                                        </div>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="name__=!name__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                v-tippy content="{{ _('Name is not known') }}"
                                                @click="editedItem.name='UNIDENTIFIED'"
                                        >
                                            <v-icon>mdi-account-question</v-icon>
                                        </v-btn>

                                    </v-card>
                                </v-col>

                                <v-col cols="12" md="6">
                                    <v-card class="d-flex" flat>
                                        <v-text-field
                                                v-if="nickname__"
                                                v-model="editedItem.nickname"
                                                label="{{ _('Nickname(s)') }}"
                                        ></v-text-field>

                                        <v-text-field
                                                v-else
                                                v-model="editedItem.nickname_ar"
                                                label="{{ _('Nickname(s) (AR)') }}"
                                                background-color="lime lighten-5"
                                        ></v-text-field>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="nickname__=!nickname__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn
                                        >
                                    </v-card>
                                </v-col>
                            </v-row>
                        </template>

                        <template v-if="editedItem.type === 'Person'">
                            <v-row>
                                <v-col cols="12" md="4">
                                    <v-card class="d-flex" flat>

                                        <div style="flex:auto" v-if="first_name__">
                                            <validation-provider name="First Name"
                                                                 :rules="{oneisnull:editedItem.first_name_ar}"
                                                                 v-slot="{errors}">
                                                <v-text-field
                                                        v-model="editedItem.first_name"
                                                        label="{{ _('First Name') }}"
                                                ></v-text-field>
                                                <span class="orange--text">${errors[0]}</span>
                                            </validation-provider>
                                        </div>

                                        <div v-else style="flex:auto">
                                            <validation-provider name="First Name(ar)"
                                                                 :rules="{oneisnull:editedItem.first_name}"
                                                                 v-slot="{errors}">
                                                <v-text-field
                                                        v-model="editedItem.first_name_ar"
                                                        label="{{ _('First Name (AR)') }}"
                                                        background-color="lime lighten-5"
                                                ></v-text-field>
                                                <span class="orange--text">${errors[0]}</span>
                                            </validation-provider>
                                        </div>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="first_name__=!first_name__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                v-tippy content="{{ _('First Name is not known') }}"
                                                @click="editedItem.first_name='UNKNOWN'"
                                        >
                                            <v-icon>mdi-account-question</v-icon>
                                        </v-btn>

                                    </v-card>
                                </v-col>

                                <v-col cols="12" md="4">
                                    <v-card class="d-flex" flat>
                                        <v-text-field
                                                v-if="middle_name__"
                                                v-model="editedItem.middle_name"
                                                label="{{ _('Middle Name(s)') }}"
                                        ></v-text-field>

                                        <v-text-field
                                                v-else
                                                v-model="editedItem.middle_name_ar"
                                                label="{{ _('Middle Name(s) (AR)') }}"
                                                background-color="lime lighten-5"
                                        ></v-text-field>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="middle_name__=!middle_name__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn
                                        >
                                    </v-card>
                                </v-col>


                                <v-col cols="12" md="4">
                                    <v-card class="d-flex" flat>

                                        <div style="flex:auto" v-if="last_name__">
                                            <validation-provider name="Last Name"
                                                                 :rules="{oneisnull:editedItem.last_name_ar}"
                                                                 v-slot="{errors}">
                                                <v-text-field
                                                        v-model="editedItem.last_name"
                                                        label="{{ _('Last Name') }}"
                                                ></v-text-field>
                                                <span class="orange--text">${errors[0]}</span>
                                            </validation-provider>
                                        </div>

                                        <div v-else style="flex:auto">
                                            <validation-provider name="Last Name(ar)"
                                                                 :rules="{oneisnull:editedItem.last_name}"
                                                                 v-slot="{errors}">
                                                <v-text-field
                                                        v-model="editedItem.last_name_ar"
                                                        label="{{ _('Last Name (AR)') }}"
                                                        background-color="lime lighten-5"
                                                ></v-text-field>
                                                <span class="orange--text">${errors[0]}</span>
                                            </validation-provider>
                                        </div>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="last_name__=!last_name__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                v-tippy content="{{ _('Last Name is not known') }}"
                                                @click="editedItem.last_name='UNKNOWN'"
                                        >
                                            <v-icon>mdi-account-question</v-icon>
                                        </v-btn>

                                    </v-card>
                                </v-col>


                            </v-row>
                            <v-row>

                                <v-col cols="12" md="4">
                                    <v-card class="d-flex" flat>
                                        <v-text-field
                                                v-if="nickname__"
                                                v-model="editedItem.nickname"
                                                label="{{ _('Nickname(s)') }}"
                                        ></v-text-field>

                                        <v-text-field
                                                v-else
                                                v-model="editedItem.nickname_ar"
                                                label="{{ _('Nickname(s) (AR)') }}"
                                                background-color="lime lighten-5"
                                        ></v-text-field>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="nickname__=!nickname__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn
                                        >
                                    </v-card>
                                </v-col>

                                <v-col cols="12" md="4">
                                    <v-card class="d-flex" flat>
                                        <v-text-field
                                                v-if="father_name__"
                                                v-model="editedItem.father_name"
                                                label="{{ _('Father\'s Name') }}"
                                        ></v-text-field>

                                        <v-text-field
                                                v-else
                                                v-model="editedItem.father_name_ar"
                                                label="{{ _('Father\'s Name (AR)') }}"
                                                background-color="lime lighten-5"
                                        ></v-text-field>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="father_name__=!father_name__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn
                                        >
                                    </v-card>
                                </v-col>

                                <v-col cols="12" md="4">
                                    <v-card class="d-flex" flat>
                                        <v-text-field
                                                v-if="mother_name__"
                                                v-model="editedItem.mother_name"
                                                label="{{ _('Mother\'s Name') }}"
                                        ></v-text-field>

                                        <v-text-field
                                                v-else
                                                v-model="editedItem.mother_name_ar"
                                                label="{{ _('Mother\'s Name (AR)') }}"
                                                background-color="lime lighten-5"
                                        ></v-text-field>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="mother_name__=!mother_name__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn
                                        >
                                    </v-card>
                                </v-col>

                            </v-row>

                            <v-row>
                                <v-col cols="12" md="2">
                                    <v-select
                                            :items="translations.actorSex"
                                            item-text="tr"
                                            item-value="en"
                                            v-model="editedItem.sex"
                                            clearable
                                            label="{{ _('Sex') }}"
                                    ></v-select>
                                </v-col>

                                <v-col cols="12" md="2">
                                    <v-select
                                            :items="translations.actorAge"
                                            item-text="tr"
                                            item-value="en"
                                            v-model="editedItem.age"
                                            clearable
                                            label="{{ _('Minor/Adult') }}"
                                    ></v-select>
                                </v-col>

                                <v-col cols="12" md="3">
                                    <v-select
                                            :items="translations.actorCivilian"
                                            v-model="editedItem.civilian"
                                            item-text="tr"
                                            item-value="en"
                                            clearable
                                            label="{{ _('Civilian/Non Civilian') }}"
                                    ></v-select>
                                </v-col>

                            <v-col cols="12" md="5">
                                <location-search-field
                                        v-model="editedItem.origin_place"
                                        api="/admin/api/locations/"
                                        item-text="full_string"
                                        item-value="id"
                                        :multiple="false"
                                        label="{{ _('Place of Origin') }}"
                                ></location-search-field>
                            </v-col>
                        </v-row>

                            <v-row>

                                <v-col cols="12" md="3">
                                    <v-card class="d-flex" flat>
                                        <v-text-field
                                                v-if="occupation__"
                                                v-model="editedItem.occupation"
                                                label="{{ _('Occupation') }}"
                                        ></v-text-field>

                                        <v-text-field
                                                v-else
                                                v-model="editedItem.occupation_ar"
                                                label="{{ _('Occupation (AR)') }}"
                                                background-color="lime lighten-5"
                                        ></v-text-field>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="occupation__=!occupation__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn
                                        >
                                    </v-card>
                                </v-col>


                                <v-col cols="12" md="3">
                                    <v-card class="d-flex" flat>
                                        <v-text-field
                                                v-if="position__"
                                                v-model="editedItem.position"
                                                label="{{ _('Position') }}"
                                        ></v-text-field>

                                        <v-text-field
                                                v-else
                                                v-model="editedItem.position_ar"
                                                label="{{ _('Position (AR)') }}"
                                                background-color="lime lighten-5"
                                        ></v-text-field>

                                        <v-btn
                                                color="grey lighten-2"
                                                outlined
                                                x-small
                                                fab
                                                class="swh d-inline"
                                                @click="position__=!position__"
                                        >
                                            <v-icon>mdi-web</v-icon>
                                        </v-btn
                                        >
                                    </v-card>
                                </v-col>

                            </v-row>
                                <v-row>

                                <v-col cols="12" md="4">
                                    <v-autocomplete
                                            :items="translations.actorFamilyStatuses"
                                            clearable
                                            item-text="tr"
                                            item-value="en"
                                            v-model="editedItem.family_status"
                                            label="{{ _('Family Status') }}"
                                    ></v-autocomplete>
                                </v-col>

                                <v-col md="4">
                                    <validation-provider name="No of Children" rules="integer|between:0,69|is_not:e"
                                                         v-slot="{errors}">
                                        <v-text-field label="{{_('No of Children')}}"
                                                      v-model="editedItem.no_children"
                                                      type="number"></v-text-field>
                                        <span class="red--text">${errors[0]}</span>
                                    </validation-provider>
                                </v-col>

                                <v-col cols="12" md="4">
                                    <search-field

                                            api="/admin/api/ethnographies/"
                                            :multiple="true"
                                            clearable
                                            :return-object="false"
                                            item-text="title"
                                            item-value="title"
                                            v-model="editedItem.ethnographies"
                                            label="{{ _('Ethnographic Information') }}"
                                    ></search-field>
                                </v-col>

                            </v-row>

                            <v-row>

                                <v-col cols="12" md="4">

                                     <search-field
                                            v-model="editedItem.nationalities"
                                            api="/admin/api/countries/"
                                            item-text="title"
                                            item-value="title"
                                            :multiple="true"
                                            :return-object="false"
                                            clearable
                                            label="{{ _('Nationalities') }}"
                                    ></search-field>
                                </v-col>

                                <v-col cols="12" md="4">

                                    <search-field
                                           v-model="editedItem.dialects"
                                           api="/admin/api/dialects/"
                                           item-text="title"
                                           item-value="title"
                                           :multiple="true"
                                           :return-object="false"
                                           clearable
                                           label="{{ _('Dialects') }}"
                                   ></search-field>
                               </v-col>

                                <v-col cols="12" md="4">
                                    <v-text-field
                                            v-model="editedItem.id_number"
                                            label="{{ _('ID Number') }}"
                                    ></v-text-field>

                                </v-col>

                            </v-row>

                        </template>


                        <v-row v-if="editedItem.actor_profiles?.length" style="position: relative">
                            <v-menu offset-y>
                                <template v-slot:activator="{ on, attrs }">
                                    <v-btn
                                            fab
                                            dark
                                            absolute
                                            top
                                            right
                                            x-small
                                            color="primary"
                                            v-bind="attrs"
                                            v-on="on"
                                    >
                                        <v-icon>mdi-plus</v-icon>
                                    </v-btn>
                                </template>

                                <v-list>
                                    <v-list-item v-for="( profileMode,i) in profileModes" :key="i"
                                                 :disabled="profileMode.id === 2 && hasMainProfile"
                                                 @click="createProfile(profileMode)">
                                        <v-list-item-title>${ profileMode.title }</v-list-item-title>
                                    </v-list-item>
                                </v-list>
                            </v-menu>


                            <v-tabs v-model="tab">
                                <v-tab v-for="(profile, index) in editedItem.actor_profiles" :key="index">
                                    <v-avatar size="32" style="scale:0.7" :color="profile.mode===2 ? 'warning':'primary'" class="white--text mr-1">${modeName(profile.mode).getInitials()}</v-avatar>
                                    Profile ${ index + 1 }
                                    <v-icon @click.stop="duplicateProfile(index)"
                                            v-tippy content="Duplicate"
                                            small class="mx-2" color="grey lighten-1">
                                        mdi-content-duplicate
                                    </v-icon>
                                    <v-icon
                                            @click.stop="deleteProfile(index)"
                                            v-tippy content="Delete"
                                            :disabled="editedItem.actor_profiles.length === 1"
                                            small class="mx-2"
                                            color="red lighten-3">
                                        mdi-delete
                                    </v-icon>
                                </v-tab>

                            </v-tabs>

                            <v-tabs-items style="width:100%" v-model="tab">
                                <v-tab-item v-for="(profile, index) in editedItem.actor_profiles" :key="index">
                                    <v-card class="pa-3 grey lighten-5" flat outlined>

                                        <v-chip v-if="profile.originid" :href="profile.source_link" target="_blank" pill label
                                                color="lime darken-3" class="white--text ml-1">
                                            # ${profile.originid}
                                        </v-chip>

                                        <v-card-text>
                                            <div class="body-1 pa-1 grey--text">{{ _('Description') }}</div>
                                            <tinymce-editor
                                                    :key="index+profile.id"
                                                    :init="tinyConfig"
                                                    v-model="profile.description"
                                            ></tinymce-editor>
                                        </v-card-text>

                                        <v-card-text>
                                            <!-- Sources -->
                                            <search-field
                                                    v-model="profile.sources"
                                                    api="/admin/api/sources/"
                                                    item-text="title"
                                                    item-value="id"
                                                    :multiple="true"
                                                    label="{{ _('Sources') }}"
                                            ></search-field>
                                        </v-card-text>


                                        <v-card-text>
                                            <!-- Labels -->
                                            <search-field
                                                    v-model="profile.labels"
                                                    api="/admin/api/labels/"
                                                    item-text="title"
                                                    item-value="id"
                                                    :multiple="true"
                                                    label="{{ _('Labels') }}"
                                            ></search-field>
                                        </v-card-text>
                                        <v-card-text>
                                            <!-- Verified Labels -->
                                            <search-field
                                                    v-model="profile.ver_labels"
                                                    api="/admin/api/labels/"
                                                    :query-params="{ fltr: 'verified', typ: 'for_actor' }"
                                                    item-text="title"
                                                    item-value="id"
                                                    :multiple="true"
                                                    label="{{ _('Verified Labels') }}"
                                            ></search-field>
                                        </v-card-text>

                                        <v-card-text class="d-flex" style="gap:20px">

                                            <!-- Publish Date -->
                                            <v-card flat class="pa-5" style="width: 50%">
                                                <pop-date-time-field
                                                        label="Publish Date"
                                                        v-model="profile.publish_date">
                                                </pop-date-time-field>
                                            </v-card>

                                            <!-- Documentation Date -->
                                            <v-card flat class="pa-5" style="width: 50%">
                                                <pop-date-time-field
                                                        label="Documentation Date"
                                                        v-model="profile.documentation_date">
                                                </pop-date-time-field>
                                            </v-card>

                                        </v-card-text>

                                        <v-card-text v-if="shouldDisplayField(profile.mode, 'mp')">


                                            <v-card color="gray lighten-5" class="my-6"
                                                    v-if="editedItem.type === 'Person'">
                                                <v-card-title>
                                                    {{ _('Missing Person Profile') }}

                                                </v-card-title>
                                                <v-card-text v-show="profile.id || profile">
                                                    <v-container>
                                                        <v-row>
                                                            <v-col md="4">
                                                                <v-text-field label="{{_('Last Address')}}"
                                                                              v-model="profile.last_address"></v-text-field>
                                                            </v-col>
                                                            <v-col md="4">
                                                                <v-text-field label="{{_('Marriage History')}}"
                                                                              v-model="profile.marriage_history"></v-text-field>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="4">
                                                                <v-select label="{{_('Pregnant at Disappearance')}}"
                                                                          clearable
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.pregnant"
                                                                          v-model="profile.pregnant_at_disappearance">

                                                                </v-select>
                                                            </v-col>
                                                            <v-col md="4">
                                                                <validation-provider name="Months Pregnant"
                                                                                     rules="digits:1|integer|min_value:1|max_value:9"
                                                                                     v-slot="{errors}">
                                                                    <v-text-field

                                                                            label="{{_('Months Pregnant at time of disappearance')}}"
                                                                            v-model="profile.months_pregnant"></v-text-field>
                                                                    <span class="red--text">${errors[0]}</span>
                                                                </validation-provider>

                                                            </v-col>
                                                            <v-col md="4">
                                                                <v-switch label="{{ _('Missing Relatives') }}"
                                                                          v-model="profile.missing_relatives"></v-switch>
                                                            </v-col>

                                                        </v-row>

                                                        <v-row>


                                                            <v-col md="6">
                                                                <v-card class="pa-3" color="yellow lighten-4">
                                                                    <v-card-title class="subtitle-2">
                                                                        {{
                                                                            _('Details of the person who saw them last')
                                                                        }}
                                                                    </v-card-title>
                                                                    <v-card-text>
                                                                        <v-textarea rows="1" label="{{_('Name')}}"
                                                                                    v-model="profile.saw_name"></v-textarea>
                                                                        <v-textarea rows="1" label="{{_('Address')}}"
                                                                                    v-model="profile.saw_address"></v-textarea>
                                                                        <v-text-field label="{{_('Phone')}}"
                                                                                      v-model="profile.saw_phone"></v-text-field>


                                                                        <validation-provider name="Email" rules="email"
                                                                                             v-slot="{errors}">
                                                                            <v-text-field label="{{_('Email')}}"
                                                                                          v-model="profile.saw_email"></v-text-field>

                                                                            <span class="red--text">${errors[0]}</span>
                                                                        </validation-provider>
                                                                    </v-card-text>
                                                                </v-card>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <mix-i title="{{_('Seen in a detention center?')}}"
                                                                       :i18n="translations"
                                                                       v-model="profile.seen_in_detention"></mix-i>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <mix-i v-model="profile.injured"
                                                                       :i18n="translations"
                                                                       title="{{_('Injured around time of disappearance?')}}"
                                                                ></mix-i>
                                                            </v-col>


                                                            <v-col md="6">
                                                                <mix-i v-model="profile.known_dead"
                                                                       :i18n="translations"
                                                                       title="{{ _('Known to be dead?')}}"></mix-i>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Details about circumstances of death')}}"
                                                                            v-model="profile.death_details"></v-textarea>
                                                            </v-col>

                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Personal Items (watch,ring,chains etc)')}}"
                                                                            v-model="profile.personal_items"></v-textarea>
                                                            </v-col>

                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="2">
                                                                <validation-provider name="Height"
                                                                                     rules="is_not:e|integer|between:20,250"
                                                                                     v-slot="{errors}">
                                                                    <v-text-field v-model="profile.height"
                                                                                  label="{{_('Height')}}"
                                                                                  suffix="cm"
                                                                    ></v-text-field>
                                                                    <span class="red--text">${errors[0]}</span>

                                                                </validation-provider>

                                                            </v-col>
                                                            <v-col md="2">
                                                                <validation-provider name="Weight"
                                                                                     rules="is_not:e|integer|between:10,350"
                                                                                     v-slot="{errors}">
                                                                    <v-text-field v-model="profile.weight"
                                                                                  label="{{_('Weight')}}"
                                                                                  suffix="kg"
                                                                    ></v-text-field>

                                                                    <span class="red--text">${errors[0]}</span>
                                                                </validation-provider>

                                                            </v-col>
                                                            <v-col md="4">
                                                                <v-select label="{{_('Physique')}}"
                                                                          clearable
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          v-model="profile.physique"
                                                                          :items="translations.physique"
                                                                ></v-select>

                                                            </v-col>
                                                            <v-col md="4">
                                                                <v-select label="{{_('Hair loss')}}"
                                                                          clearable
                                                                          v-model="profile.hair_loss"
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.hairLoss"
                                                                ></v-select>

                                                            </v-col>
                                                        </v-row>

                                                        <v-row>
                                                            <v-col md="3">
                                                                <v-select label="{{_('Hair type')}}"
                                                                          clearable
                                                                          v-model="profile.hair_type"
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.hairType"
                                                                ></v-select>
                                                            </v-col>
                                                            <v-col md="3">
                                                                <v-select label="{{_('Hair length')}}"
                                                                          clearable
                                                                          v-model="profile.hair_length"
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.hairLength"
                                                                ></v-select>
                                                            </v-col>
                                                            <v-col md="3">
                                                                <v-select label="{{_('Hair color')}}"
                                                                          clearable
                                                                          v-model="profile.hair_color"
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.hairColor"
                                                                ></v-select>
                                                            </v-col>
                                                            <v-col md="3">
                                                                <v-select label="{{_('Facial hair')}}"
                                                                          clearable
                                                                          v-model="profile.facial_hair"
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.facialHair"
                                                                ></v-select>
                                                            </v-col>

                                                        </v-row>

                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            v-model="profile.posture"
                                                                            label="{{_('Notes on posture and walking style')}}"
                                                                ></v-textarea>
                                                                <v-select label="{{_('Handness')}}"
                                                                          clearable
                                                                          :items="translations.handness"
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          v-model="profile.handedness"></v-select>
                                                                <v-select label="{{_('Glasses')}}"
                                                                          clearable
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.glasses"
                                                                          v-model="profile.glasses"></v-select>
                                                                <v-select label="{{_('Eye color')}}"
                                                                          clearable
                                                                          :items="translations.eyeColor"
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          v-model="profile.eye_color"></v-select>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <mix-ii title="{{_('Skin Markings')}}"
                                                                        :i18n="translations"
                                                                        :items="translations.skinMarkings"
                                                                        item-text="tr"
                                                                        item-value="en"
                                                                        multiple
                                                                        v-model="profile.skin_markings"></mix-ii>
                                                            </v-col>

                                                        </v-row>


                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Distinctive characteristics (congenital)')}}"
                                                                            v-model="profile.dist_char_con"></v-textarea>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Distinctive characteristics (acquired)')}}"
                                                                            v-model="profile.dist_char_acq"></v-textarea>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1" label="{{_('Physical habits')}}"
                                                                            v-model="profile.physical_habits"></v-textarea>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <v-textarea rows="1" label="{{_('Other comments')}}"
                                                                            v-model="profile.other"></v-textarea>
                                                            </v-col>
                                                        </v-row>

                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Physicians name and contact')}}"
                                                                            v-model="profile.phys_name_contact"></v-textarea>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Fractures / Injuries (indicate place, side, circumstances, age at the time of injury, treatment)')}}"
                                                                            v-model="profile.injuries"
                                                                ></v-textarea>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Implants (pacemakers, orthopedic prostheses, screws or metal plates, etc...) with date or age')}}"
                                                                            v-model="profile.implants"></v-textarea>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Congenital malformations (indicate type and whether there is more than one relative with the same pathology)')}}"
                                                                            v-model="profile.malforms"
                                                                ></v-textarea>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Pain and/or ailments')}}"
                                                                            v-model="profile.pain"></v-textarea>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Other medical conditions (specify type and age of occurrence)')}}"
                                                                            v-model="profile.other_conditions"
                                                                ></v-textarea>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Accidents (indicate age of occurrence)')}}"
                                                                            v-model="profile.accidents"></v-textarea>
                                                            </v-col>
                                                            <v-col md="6">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Prescription drugs taken (indicate at what age and reason)')}}"
                                                                            v-model="profile.pres_drugs"
                                                                ></v-textarea>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col cols="3">
                                                                <v-select
                                                                        clearable
                                                                        item-text="tr"
                                                                        item-value="en"
                                                                        :items="translations.smoker"
                                                                        label="{{ _('Smoker') }}"
                                                                        v-model="profile.smoker">

                                                                </v-select>
                                                            </v-col>
                                                            <v-col cols="3">
                                                                <v-switch label="{{_('Is there a Dental Record?')}}"
                                                                          v-model="profile.dental_record"></v-switch>
                                                            </v-col>
                                                            <v-col cols="3">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Dentist\s name and contact')}}"
                                                                            v-model="profile.dentist_info"></v-textarea>
                                                            </v-col>
                                                            <v-col cols="3">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Teeth features (spacing, extra teeth, missing teeth, overbite, etc...)')}}"
                                                                            v-model="profile.teeth_features"></v-textarea>
                                                            </v-col>

                                                        </v-row>

                                                        <v-row>
                                                            <v-col md="3">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Dental problems (absences, infections, bleeding, etc...)')}}"
                                                                            v-model="profile.dental_problems"></v-textarea>
                                                            </v-col>
                                                            <v-col md="3">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Dental treatments (extractions, fillings, etc...) with dates')}}"
                                                                            v-model="profile.dental_treatments"></v-textarea>
                                                            </v-col>
                                                            <v-col md="3">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Dental habits (toothpicks, smoking, etc...)')}}"
                                                                            v-model="profile.dental_habits"></v-textarea>
                                                            </v-col>
                                                            <v-col md="3">
                                                                <v-select label="{{ _('Case status')}}"
                                                                          v-model="profile.case_status"
                                                                          clearable
                                                                          item-text="tr"
                                                                          item-value="en"
                                                                          :items="translations.caseStatus"
                                                                ></v-select>
                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col>

                                                                <mix-iii
                                                                        :i18n="translations"
                                                                        v-model="profile.reporters"></mix-iii>

                                                            </v-col>
                                                        </v-row>
                                                        <v-row>
                                                            <v-col md="4">
                                                                <v-text-field
                                                                        label="{{_('Identified by (responsible institution)')}}"
                                                                        v-model="profile.identified_by"
                                                                ></v-text-field>
                                                            </v-col>
                                                            <v-col md="4">
                                                                <v-switch label="{{_('Was the family notified?')}}"
                                                                          v-model="profile.family_notified"></v-switch>

                                                            </v-col>
                                                            <v-col md="4">
                                                                <v-textarea rows="1"
                                                                            label="{{_('Location of reburial (full address)')}}"
                                                                            v-model="profile.reburial_location"></v-textarea>

                                                            </v-col>
                                                        </v-row>


                                                    </v-container>
                                                </v-card-text>

                                            </v-card>


                                        </v-card-text>


                                        <!-- Source Link -->
                                        <v-card-text  v-if="shouldDisplayField(profile.mode, 'source')">
                                            <v-sheet class="d-flex align-center">
                                                <validation-provider name="Source Link"
                                                                     :rules="getValidationRules(profile)"
                                                                     v-slot="{errors}">
                                                    <v-text-field class="mx-2"
                                                                  v-model="profile.source_link"
                                                                  label="{{ _('Source Link') }}"
                                                    ></v-text-field>
                                                    <span class="orange--text"> ${errors[0]}</span>
                                                </validation-provider>

                                                <v-switch small class="mx-2" label="{{ _('Private') }}"
                                                          v-model="profile.source_link_type"
                                                          >

                                                </v-switch>

                                            </v-sheet>

                                        </v-card-text>
                                    </v-card>
                                </v-tab-item>
                            </v-tabs-items>

                        </v-row>

                        <!-- events  -->

                        <v-row>
                            <v-col col="12">

                                {% include 'admin/partials/event_dialog.html' %}

                            </v-col>

                        </v-row>

                        <!-- End Event -->

                        <v-row>
                            <v-col col="12">
                                <!-- Relate Actors Base Card -->

                                <v-card outlined class="my-5">
                                    <v-card-title class="handle">
                                        <v-icon left>mdi-account-multiple</v-icon>
                                        {{ _('Related Actors') }}
                                        <v-spacer></v-spacer>

                                        <v-text-field
                                                class="mx-5"
                                                v-model="relateActorTerm"
                                                label="{{ _('Search & Relate Actors') }}"
                                                @keydown.enter="searchRelatedActors"
                                                @click:append="searchRelatedActors"
                                                append-icon="mdi-magnify"
                                        ></v-text-field>
                                    </v-card-title>


                                    <!--  Grid of Actors Items -->


                                    <v-card-text>
                                        <v-layout wrap>
                                            <v-flex
                                                    class="pa-1"
                                                    md6
                                                    v-for="(item,index) in editedItem.actor_relations"
                                                    :key="index"
                                            >
                                                <!--  Related Actor  Card -->
                                                <actor-result :i18n="translations" :actor="item.actor">
                                                    <!--  attach relationship form -->
                                                    <template v-slot:header>
                                                        <v-card outlined color="lime lighten-5">
                                                            <v-card-title class="subtitle-2">
                                                                <v-icon left>mdi-link</v-icon>
                                                                {{ _('Relationship Information') }}
                                                            </v-card-title>


                                                            <v-card-text>
                                                                <div>
                                                                    <div class="caption">
                                                                        {{ _('Probability') }}
                                                                    </div>
                                                                    <v-chip-group
                                                                            v-model="editedItem.actor_relations[index].probability"
                                                                            column
                                                                            active-class="primary dark"
                                                                    >
                                                                        <v-chip v-for="r in translations.probs"
                                                                                small> ${r.tr}
                                                                        </v-chip>
                                                                    </v-chip-group>

                                                                    <div class="caption">{{ _('Related As') }}</div>
                                                                    <v-chip-group
                                                                            v-model="editedItem.actor_relations[index].related_as"
                                                                            column
                                                                            active-class="primary dark"
                                                                    >
                                                                        <v-chip v-for="rel in atoaInfo" :value="rel.id" :key="rel.id"
                                                                                small>
                                                                            ${
                                                                            detectDirection(editedItem,
                                                                            editedItem.actor_relations[index].actor)
                                                                            ? rel.title: rel.reverse_title }
                                                                        </v-chip>

                                                                    </v-chip-group>


                                                                </div>

                                                                <v-text-field class="mt-2"
                                                                              v-model="editedItem.actor_relations[index].comment"
                                                                              dense outlined
                                                                              label="{{ _('Comments') }}"
                                                                ></v-text-field>
                                                            </v-card-text>

                                                        </v-card>
                                                    </template>

                                                    <template v-slot:actions>
                                                        <v-btn
                                                                class="mx-auto"
                                                                @click="removeActor($event,index)"
                                                                x-small
                                                                fab
                                                                outlined
                                                                color="red lighten-3"
                                                        >
                                                            <v-icon>mdi-delete-sweep</v-icon>
                                                        </v-btn
                                                        >
                                                    </template>


                                                </actor-result>

                                            </v-flex>
                                        </v-layout>
                                    </v-card-text>
                                </v-card>


                                <!-- End Relate Actor Base Card-->


                                <!-- Relate Bulletins Base Card -->

                                <v-card outlined class="my-5">
                                    <v-card-title class="handle">
                                        <v-icon left>mdi-file-document-multiple</v-icon>
                                        {{ _('Related Bulletins') }}
                                        <v-spacer></v-spacer>

                                        <v-text-field
                                                class="mx-5"
                                                v-model="relateBulletinTerm"
                                                label="{{ _('Search & Relate Bulletins') }}"
                                                @keydown.enter="searchRelatedBulletins"
                                                @click:append="searchRelatedBulletins"
                                                append-icon="mdi-magnify"
                                        ></v-text-field>
                                    </v-card-title>


                                    <!--  Grid of Bulletins Items -->


                                    <v-card-text>
                                        <v-layout wrap>
                                            <v-flex
                                                    class="pa-1"
                                                    md6
                                                    v-for="(item,index) in editedItem.bulletin_relations"
                                                    :key="index"
                                            >
                                                <!--  Related Bulletin  Card -->
                                                <bulletin-result :i18n="translations" :bulletin="item.bulletin">
                                                    <!--  attach relationship form -->
                                                    <template v-slot:header>
                                                        <v-card outlined color="lime lighten-5">
                                                            <v-card-title class="subtitle-2">
                                                                <v-icon left>mdi-link</v-icon>
                                                                {{ _('Relationship Information') }}
                                                            </v-card-title>


                                                            <v-card-text>
                                                                <div>
                                                                    <div class="caption">{{ _('Probability') }}</div>
                                                                    <v-chip-group
                                                                            v-model="editedItem.bulletin_relations[index].probability"
                                                                            column
                                                                            active-class="primary dark"
                                                                    >
                                                                        <v-chip v-for="r in translations.probs"
                                                                                small> ${r.tr}
                                                                        </v-chip>
                                                                    </v-chip-group>

                                                                    <div class="caption">{{ _('Related As') }}</div>
                                                                    <v-chip-group
                                                                            v-model="editedItem.bulletin_relations[index].related_as"
                                                                            column
                                                                            multiple
                                                                            active-class="primary dark"
                                                                    >
                                                                        <v-chip v-for="rel in atobInfo" :value="rel.id" :key="rel.id"
                                                                                small> ${rel.title}
                                                                        </v-chip>
                                                                    </v-chip-group>


                                                                </div>

                                                                <v-text-field class="mt-2"
                                                                              v-model="editedItem.bulletin_relations[index].comment"
                                                                              dense outlined
                                                                              label="{{ _('Comments') }}"
                                                                ></v-text-field>
                                                            </v-card-text>

                                                        </v-card>
                                                    </template>

                                                    <template v-slot:actions>
                                                        <v-btn
                                                                class="mx-auto"
                                                                @click="removeBulletin($event,index)"
                                                                x-small
                                                                fab
                                                                outlined
                                                                color="red lighten-3"
                                                        >
                                                            <v-icon>mdi-delete-sweep</v-icon>
                                                        </v-btn
                                                        >
                                                    </template>


                                                </bulletin-result>

                                            </v-flex>
                                        </v-layout>
                                    </v-card-text>
                                </v-card>


                                <!---     End Relate bulletin base card   ---->

                                <!-- Relate Incidents Base Card -->

                                <v-card outlined class="my-5">
                                    <v-card-title class="handle">
                                        <v-icon left>mdi-hazard-lights</v-icon>
                                        {{ _('Related Incidents') }}
                                        <v-spacer></v-spacer>

                                        <v-text-field
                                                class="mx-5"
                                                v-model="relateIncidentTerm"
                                                label="{{ _('Search & Relate Incidents') }}"
                                                @keydown.enter="searchRelatedIncidents"
                                                @click:append="searchRelatedIncidents"
                                                append-icon="mdi-magnify"
                                        ></v-text-field>
                                    </v-card-title>


                                    <!--  Grid of Incidents Items -->


                                    <v-card-text>
                                        <v-layout wrap>
                                            <v-flex
                                                    class="pa-1"
                                                    md6
                                                    v-for="(item,index) in editedItem.incident_relations"
                                                    :key="index"
                                            >
                                                <!--  Related Actor  Card -->
                                                <incident-result :i18n="translations" :incident="item.incident">
                                                    <!--  attach relationship form -->
                                                    <template v-slot:header>
                                                        <v-card outlined color="lime lighten-5">
                                                            <v-card-title class="subtitle-2">
                                                                <v-icon left>mdi-link</v-icon>
                                                                {{ _('Relationship Information') }}
                                                            </v-card-title>


                                                            <v-card-text>

                                                                <div>
                                                                    <div class="caption">{{ _('Probability') }}</div>
                                                                    <v-chip-group
                                                                            v-model="editedItem.incident_relations[index].probability"
                                                                            column
                                                                            active-class="primary dark"
                                                                    >
                                                                        <v-chip v-for="r in translations.probs"
                                                                                small> ${ r.tr }
                                                                        </v-chip>
                                                                    </v-chip-group>

                                                                    <div class="caption">{{ _('Related As') }}</div>
                                                                    <v-chip-group
                                                                            v-model="editedItem.incident_relations[index].related_as"
                                                                            column
                                                                            multiple
                                                                            active-class="primary dark"
                                                                    >
                                                                        <v-chip v-for="rel in itoaInfo" :value="rel.id" :key="rel.id"
                                                                                small> ${ rel.title }
                                                                        </v-chip>
                                                                    </v-chip-group>


                                                                </div>

                                                                <v-text-field class="mt-2"
                                                                              v-model="editedItem.incident_relations[index].comment"
                                                                              dense outlined
                                                                              label="{{ _('Comments') }}"
                                                                ></v-text-field>
                                                            </v-card-text>

                                                        </v-card>
                                                    </template>

                                                    <template v-slot:actions>
                                                        <v-btn
                                                                class="mx-auto"
                                                                @click="removeIncident($event,index)"
                                                                x-small
                                                                fab
                                                                outlined
                                                                color="red lighten-3"
                                                        >
                                                            <v-icon>mdi-delete-sweep</v-icon>
                                                        </v-btn
                                                        >
                                                    </template>


                                                </incident-result>

                                            </v-flex>
                                        </v-layout>
                                    </v-card-text>
                                </v-card>


                                <!-- End Relate Incident Base Card-->


                                {% include 'admin/partials/media_dialog.html' %}


                            </v-col>
                        </v-row>


                      
                        <v-row>
                            <v-col cols="12" md="8">


                                <validation-provider
                                        name="Comments"
                                        rules="required"
                                        v-slot="{ errors }"
                                >


                                    <v-textarea outlined v-model="editedItem.comments"
                                                label="{{ _('Comments') }}"></v-textarea>
                                    <span class="orange--text"> ${errors[0]}</span>
                                </validation-provider>
                            </v-col>
                            <v-col cols="12" md="4">
                                <v-select
                                        :disabled="statusDisabled"
                                        item-text="tr"
                                        item-value="en"
                                        :items="statusItems"

                                        v-model="editedItem.status"
                                        label="{{ _('Status') }}"
                                ></v-select>
                            </v-col>
                        </v-row>

                    </v-container>
                </v-card-text>

            </v-sheet>
        </v-card>
        </form>
    </v-dialog>
</validation-observer>